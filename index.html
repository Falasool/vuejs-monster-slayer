<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>âš”ï¸ Monster Slayer ğŸ›¡ï¸</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/vue@next" defer></script>

    <link rel="stylesheet" href="./style.css" />
    <script src="app.js" defer></script>
  </head>
  <body>
    <header class="header">
      <h1>âš”ï¸ MONSTER SLAYER ğŸ›¡ï¸</h1>
    </header>

    <div class="game">
      <!-- æ€ªå…½è¡€æ¡ -->
      <section class="container">
        <h2>Monster Health</h2>
        <div class="health-bar">
          <div class="health-value" :style="monsterBarStyle"></div>
        </div>
      </section>

      <!-- éª‘å£«è¡€æ¡ -->
      <section v-if="uname" class="container">
        <h2>Knight {{ uname }} Health</h2>
        <div class="health-bar">
          <div class="health-value" :style="knightBarStyle"></div>
        </div>
      </section>

      <!-- é€‰æ‹©ç©å®¶å§“å -->
      <section v-if="!uname" class="container choose-player-name">
        <input
          v-model.trim.lazy="uname"
          @click.enter="onBlur"
          class="name-input"
          type="text"
          placeholder="Choose Your Name"
        />
      </section>

      <!-- æ¯”èµ›ç»“æœï¼šèµ¢/è¾“/å¹³å±€ -->
      <section v-if="winner" class="container game-result">
        <h2>FINAL STATEMENT</h2>
        <h3 v-if="winner==='knight'">ğŸ¥³ YOU WON ğŸ¥³</h3>
        <h3 v-else-if="winner==='monster'">ğŸ˜” YOU LOST ğŸ˜”</h3>
        <h3 v-else>ğŸ˜ DRAW ğŸ˜</h3>
      </section>

      <!-- é‡æ–°å¼€å§‹ -->
      <section v-if="winner" class="restart" @click="restartGame"><button>RESTART</button></section>

      <!-- æ“ä½œæŒ‰æ‰­ï¼š -->
      <section v-if="uname && !winner" class="operate">
        <button @click="attackMonster">ATTACK</button>
        <button @click="specialAttackMonster" :disabled="mayUseSpecialAttack">
          SPECIAL
        </button>
        <button @click="healKnight">HEAL</button>
        <button @click="surrenderKnight">SURRENDER</button>
      </section>

      <section v-if="uname" class="container game-log">
        <h2>Battle Log</h2>
        <ul class="log-list">
          <li v-for="log in logs" :key="currentTime">
            [{{currentTime()}}] {{ log.actionBy }} {{log.actionType}} {{
            log.actionValue }}
            <span v-if="log.actionType=='attacks'">damage</span>
            <span v-else-if="log.actionType=='surrenders'"></span>
            <span v-else>points</span>
          </li>
        </ul>
      </section>
    </div>
  </body>
</html>
